<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8"/>
    <link href='https://fonts.googleapis.com/css?family=MuseoModerno' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <title>Đăng nhập</title>
    <link rel="stylesheet" href="style-login.css">
    </head>
    <body>
        <form id="login-form">
        <div id="login-sec">
            <div class="form-title">
             <h2>Đăng nhập</h2>
            </div>   
            <div class="ml"></div>
            <div class="login-info">
                <fieldset>
                    
                    <legend>Tên đăng nhập:</legend>
                    <label for="user">
                        <input type="text" id="user" autocomplete="off" placeholder="Nhập username...">
                    </label>
                    <p id="username_error"><p>
                    <legend>Mật khẩu:</legend>
                    <label for="password">
                        <input type="password" id="password" placeholder="Nhập mật khẩu..." >
                    </label>
                </fieldset>
            </div>
            <input class="btn" type="submit" value="Đăng nhập"></input>
            <a href="#"><p class="forgot">Quên mật khẩu?</p></a>
            <p id="form-footer">Chưa có tài khoản? <a href="register.html">Đăng ký</a></p>
        </div>
        
        </form>
        
        <script>
       const form = document.getElementById('login-form');
            form.addEventListener('submit',registerUser)
            async function registerUser(event){
                event.preventDefault();

                const username = document.getElementById('user').value;
                const password = document.getElementById('password').value;
                const result= await fetch('/api/login',{
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json'
                    },
                    body: JSON.stringify({
                       username,password
                    })
                }).then((res)=>res.json())
                
              

                if(result.status ==='ok'){
                   
                    alert('Đăng nhập thành công');
                }else{
                    alert(result.error);
                }
            }
        </script>
    </body>

</html>