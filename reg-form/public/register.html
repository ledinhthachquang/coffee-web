<!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="UTF-8"/>
    <link href='https://fonts.googleapis.com/css?family=MuseoModerno' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <title>Đăng ký tài khoản</title>
    <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <form id="reg-form">
        <div id="reg-sec">
            <div class="form-title">
             <h2>Đăng ký tài khoản</h2>
            </div>   
            <div class="ml"></div>
            <div class="reg-info">
                <fieldset>
                    <legend>Tên của bạn:</legend>
                    <label for="name">
                        <input type="text" id="name" autocomplete="off" placeholder="Nhập tên...">
                    </label>
                    <legend>Email:</legend>
                    <label>
                        <input id="email" type="email" autocomplete="off" placeholder="Nhập email...">
                    </label>
                    <legend>Tên đăng nhập:</legend>
                    <label for="user">
                        <input type="text" id="user" autocomplete="off" placeholder="Nhập username...">
                    </label>
                    <p id="username_error"><p>
                    <legend>Mật khẩu:</legend>
                    <label for="password">
                        <input type="password" id="password" placeholder="Nhập mật khẩu...(6 ký tự trở lên)" >
                    </label>
                </fieldset>
            </div>
            <input class="btn" type="submit" value="Đăng ký"></input>
        </div>

        </form>
        <script>
            const form = document.getElementById('reg-form');
            form.addEventListener('submit',registerUser)
            async function registerUser(event){
                event.preventDefault();
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;

                const username = document.getElementById('user').value;
                const password = document.getElementById('password').value;
                const result= await fetch('/api/register',{
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json'
                    },
                    body: JSON.stringify({
                        name,email,username,password
                    })
                }).then((res)=>res.json())
                
              

                if(result.status ==='ok'){
                    alert('Tạo tài khoản thành công');
                }else{
                    alert(result.error);
                }
            }
        </script>
    </body>

</html>